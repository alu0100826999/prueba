
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Cookies Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../capituloQueryString/queryString.html" />
    
    
    <link rel="prev" href="../express/express.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../capitulogit/git.html">
            
                <a href="../capitulogit/git.html">
            
                    
                    Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../capitulonodejs/nodejs.html">
            
                <a href="../capitulonodejs/nodejs.html">
            
                    
                    Node JS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../capitulogithub/github.html">
            
                <a href="../capitulogithub/github.html">
            
                    
                    Github
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../capitulogitbook/Gitbook.html">
            
                <a href="../capitulogitbook/Gitbook.html">
            
                    
                    Gitbook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../capituloghpages/ghpages.html">
            
                <a href="../capituloghpages/ghpages.html">
            
                    
                    gh-pages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../capituloPandoc/Pandoc.html">
            
                <a href="../capituloPandoc/Pandoc.html">
            
                    
                    Pandoc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../capituloC9/c9.html">
            
                <a href="../capituloC9/c9.html">
            
                    
                    Cloud9
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../capituloMarkdown/Markdown.html">
            
                <a href="../capituloMarkdown/Markdown.html">
            
                    
                    Markdown
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../express/express.html">
            
                <a href="../express/express.html">
            
                    
                    Express
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.11" data-path="cookies.html">
            
                <a href="cookies.html">
            
                    
                    Cookies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../capituloQueryString/queryString.html">
            
                <a href="../capituloQueryString/queryString.html">
            
                    
                    Query String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../capituloModuloCookie/moduloCookie.html">
            
                <a href="../capituloModuloCookie/moduloCookie.html">
            
                    
                    Modulo Cookie
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../capituloSessionAuth/sessionauth.html">
            
                <a href="../capituloSessionAuth/sessionauth.html">
            
                    
                    Ejemplo Session Auth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../POO/POO.html">
            
                <a href="../POO/POO.html">
            
                    
                    POO
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Cookies</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="cookies-y-sessions">Cookies y Sessions</h1>
<h2 id="http-cookies">HTTP cookies</h2>
<p>Un cookie HTTP es un peque&#xF1;o fragmento de datos que un servidor env&#xED;a a al navegador web del usuario, que puede almacenarlo y devolverlo al mismo servidor. Se suele utilizar para saber si dos solicitudes proceden del mismo navegador.
Las cookies se suelen utilizar para:</p>
<ul>
<li>Gesti&#xF3;n de sesiones (inicios de sesi&#xF3;n de usuarios).</li>
<li>Personalizaci&#xF3;n (preferencias del usuario).</li>
<li>Seguimiento (an&#xE1;lisis del comportamiento del usuario).</li>
</ul>
<h3 id="creating-cookies">Creating Cookies</h3>
<h4 id="set-cookie-and-cookie-headers">Set-Cookie and Cookie headers</h4>
<p>La cabecera de respuesta HTTP Set-Cookie se utiliza para enviar cookies desde el servidor al usuario. Una cookie sencilla se puede configurar de la siguiente manera:</p>
<pre><code>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;
</code></pre><p>El servidor le dice al cliente que almacene una cookie. La respuesta enviada al navegador contendr&#xE1; el encabezado Set-Cookie y el navegador almacenar&#xE1; la cookie.</p>
<pre><code>HTTP/1.0 200 OK
Content-type: text/html
Set-Cookie: yummy_cookie=choco
Set-Cookie: tasty_cookie=strawberry
</code></pre><p>Ahora, con cada nueva solicitud al servidor, el navegador enviar&#xE1; todas las cookies previamente almacenadas al servidor usando cookie headers.</p>
<pre><code>GET /sample_page.html HTTP/1.1
Host: www.example.org
Cookie: yummy_cookie=choco; tasty_cookie=strawberry
</code></pre><h5 id="directivas">Directivas</h5>
<p><strong> &lt; cookie-name &gt; = &lt; cookie-value &gt; </strong>  </p>
<p>Una cookie puede comenzar con:</p>
<ul>
<li>Un &lt; cookie-name &gt; puede ser cualquier cosa menos caracteres de control o espacios y pesta&#xF1;as. Tampoco debe contener caracteres como: ( ) &lt; &gt; @ , ; : \ &quot; /  [ ] ? = { }.</li>
<li>Un &lt; cookie-value &gt; puede estar configurado opcionalmente entre comillas dobles y cualquier car&#xE1;cter ASCII, excluyendo CTL, espacios en blanco, comillas dobles, coma, punto y coma y barra invertida.</li>
<li><strong> __Secure- prefix: </strong> Las cookies con un nombre que comienza con __Secure- (el gui&#xF3;n es parte del prefijo) deben establecerse con el flag secure y deben venir de una p&#xE1;gina segura (HTTPS).</li>
<li><strong> __Host- prefix: </strong> Las cookies con un nombre que empiece por __Host- deben estar definidas con el flag secure, deben ser de una p&#xE1;gina segura (HTTPS), no deben tener un dominio especificado (y por lo tanto no se env&#xED;an a subdominios) y la ruta debe ser &quot;/&quot;.</li>
</ul>
<p><strong>Expires=&lt; date &gt;</strong> (Optional)
La vida m&#xE1;xima de una cookie es la misma que la marca de tiempo especificada para un HTTP. Si no se especifica, la cookie tendr&#xE1; la vida &#xFA;til de una cookie de sesi&#xF3;n. Una sesi&#xF3;n finaliza cuando el cliente se cierra, lo que significa que las cookies de sesi&#xF3;n se eliminar&#xE1;n en ese momento. Sin embargo, muchos navegadores web tienen una caracter&#xED;stica llamada sesi&#xF3;n de restauraci&#xF3;n que guardar&#xE1; todas las pesta&#xF1;as y que al volver a acceder al navegador ser&#xE1; como si la cookie no se hubiera cerrado nunca.</p>
<p><strong>Max-Age=&lt; non-zero-digit &gt;</strong> (Optional)
N&#xFA;mero de segundos hasta que expire la cookie. Se especifica con uno o m&#xE1;s d&#xED;gitos de 1 a 9.</p>
<p><strong>Domain=&lt; domain-value &gt;</strong> (Optional)
Especifica los hosts a los que se enviar&#xE1; la cookie. Si no se especifica, el valor predeterminado es la parte del host de la ubicaci&#xF3;n del documento actual (pero sin incluir subdominios). Contrariamente a las especificaciones anteriores, los puntos principales en los nombres de dominio son ignorados. Si se especifica un dominio, los subdominios siempre se incluyen.</p>
<p><strong>Path=&lt; path-value &gt;</strong> (Optional)
Indica una ruta URL que debe existir en el recurso solicitado antes de enviar el Cookie header. El car&#xE1;cter slash(&quot;/&quot;) se interpreta como un separador de directorios.</p>
<p><strong>Secure</strong> (Optional)
Una secure cookie s&#xF3;lo se enviar&#xE1; al servidor cuando se realice una solicitud utilizando SSL y el protocolo HTTPS. Sin embargo, la informaci&#xF3;n confidencial o sensible nunca debe ser almacenada o transmitida en cookies HTTP, ya que el mecanismo completo es intr&#xED;nsecamente inseguro y esto no significa que cualquier informaci&#xF3;n est&#xE9; cifrada, por ejemplo.
Los sitios inseguros (http:) no pueden configurar secure cookies.</p>
<p><strong>HttpOnly</strong> (Optional)
Las cookies s&#xF3;lo de HTTP no son accesibles a trav&#xE9;s de JavaScript a trav&#xE9;s de la propiedad Document.cookie, las API XMLHttpRequest y Request para evitar ataques contra secuencias de comandos entre sitios (XSS).</p>
<p><strong> SameSite=Strict </strong>
<strong> SameSite=Lax </strong> (Optional)
Permite a los servidores afirmar que una cookie no debe enviarse junto con las solicitudes entre sitios, lo que proporciona cierta protecci&#xF3;n contra los ataques de falsificaci&#xF3;n de solicitudes entre sitios (CSRF).</p>
<h4 id="session-cookies">Session Cookies</h4>
<p>Las cookies de sesi&#xF3;n se eliminan cuando el cliente se cierra, solo est&#xE1;n activas durante la sesi&#xF3;n.
Ejemplo:</p>
<pre><code>Set-Cookie: sessionid=38afes7a8; httponly; Path=/
</code></pre><h4 id="permanent-cookies">Permanent Cookies</h4>
<p>Este tipo de cookies, en vez de expirar al cerrar la sesi&#xF3;n del clientes, estas caducan en una fecha espec&#xED;fica (Expires) o despu&#xE9;s de un per&#xED;odo de tiempo espec&#xED;fico (Max-Age).</p>
<pre><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;
</code></pre><p>En este ejemplo, se establece una Set-Cookie que permanecer&#xE1; abierta hasta el siguiente Mi&#xE9;rcoles a partir del 21 de Octubre de 2015.</p>
<h4 id="secure-and-httponly-cookies">Secure and HttpOnly cookies</h4>
<p>Una Secure Cookie s&#xF3;lo se enviar&#xE1; al servidor cuando se realice una solicitud utilizando los protocolos SSL y HTTPS. Las HttpPnly cookies no son accesibles a trav&#xE9;s de JavaScript con las propiedades Document.cookie, las API XMLHttpRequest y Request.</p>
<p>Para a&#xF1;adir estos dos tipos de cookies a nuestro Set-Cookie, debemos poner:</p>
<pre><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly
</code></pre><h4 id="scope-of-ookies-alcance-de-las-cookies">Scope of ookies (alcance de las cookies)</h4>
<p>Las directivas de dominio y ruta definen el &#xE1;mbito de la cookie, es decir, el conjunto de URL a las que se deben enviar las cookies.
El <strong>dominio</strong> especifica los hosts a los que se enviar&#xE1; la cookie. Si no se especifica, el valor predeterminado es la parte del host de la ubicaci&#xF3;n del documento actual (pero sin incluir subdominios). Si se especifica un dominio, los subdominios siempre se incluyen. Por ejemplo, si especificamos un Domain = mozilla.org, las cookies se incluyen en subdominios como developer . mozilla . org.
<strong>Path</strong> indica una ruta de acceso de URL que debe existir en el recurso solicitado antes de enviar el Cookie header. El car&#xE1;cter slash (&quot;/&quot;) se interpreta como un separador de directorios y los subdirectorios se emparejar&#xE1;n tambi&#xE9;n. Por ejemplo, si establecemos Path = /docs, rutas v&#xE1;lidas podr&#xED;an ser: &quot;/docs&quot;, &quot;/docs/Web/&quot; o &quot;/docs/Web/HTTP&quot;.</p>
<h4 id="samesite-cookies">SameSite cookies</h4>
<p>Este tipo de cookie permiten a los servidores afirmar que una cookie no debe enviarse junto con el resto de solicitudes.</p>
<h4 id="javascript-access-using-documentcookies">JavaScript access using Document.cookies</h4>
<p>Para crear nuevas cookies, podemos utilizar la propiedad <strong>Document.cookie</strong>, pudiendo acceder a las cookies creadas anteriormente (en el caso de que no tengan el inidicar HttpOnly).</p>
<pre><code>document.cookie = &quot;yummy_cookie=choco&quot;;
document.cookie = &quot;tasty_cookie=strawberry&quot;;
console.log(document.cookie);
</code></pre><h3 id="security">Security</h3>
<h4 id="session-hijacking-and-xss">Session hijacking and XSS</h4>
<p>Las cookies se utilizan a menudo en la aplicaci&#xF3;n web para identificar un usuario y su sesi&#xF3;n autenticada. As&#xED; que robar una cookie de una aplicaci&#xF3;n web puede llevar a secuestrar la sesi&#xF3;n del usuario autenticado. Las maneras comunes de robar cookies incluyen el uso de la ingenier&#xED;a social o explotando una vulnerabilidad XSS en la aplicaci&#xF3;n.
Para prevenir esto podemos utilizar la HttpOnly Cookie:</p>
<h4 id="cross-site-request-forgery-csrf-falsificaci&#xF3;n-de-solicitudes-entre-sitios">Cross-site request forgery (CSRF) (Falsificaci&#xF3;n de solicitudes entre sitios)</h4>
<p>Se pueden utilizar enlaces con direcciones enga&#xF1;osas en las que al entrar te pueden robar los datos de usuario. Para prevenir esto, hay varias t&#xE9;cnicas diponibles:</p>
<ul>
<li>Un filtrado de entradas.</li>
<li>Obligar a confirmar cualquier acci&#xF3;n sensible.</li>
<li>Las cookies utilizadas para acciones sensibles deben tener una vida &#xFA;til corta.</li>
</ul>
<h3 id="tracking-and-privacy-cookies-de-seguimiento-y-privacidad">Tracking and Privacy (Cookies de seguimiento y privacidad)</h3>
<h4 id="thrid-party-cookies-cookies-de-terceros">Thrid-party cookies (Cookies de terceros)</h4>
<p>Las cookies tienen un dominio asociado a ellas. Si este dominio es el mismo que el dominio de la p&#xE1;gina en la que se encuentra, se dice que las cookies son una cookie de primera persona. Si el dominio es diferente, se dice que es una cookie de terceros. Si bien las cookies de primera persona se env&#xED;an &#xFA;nicamente al servidor que las establece, una p&#xE1;gina web puede contener im&#xE1;genes u otros componentes almacenados en servidores de otros dominios (como los banners publicitarios). Las cookies de terceros se utilizan principalmente para publicidad y seguimiento en toda la red.
Ejemplo:</p>
<pre><code>Set-Cookie: qwerty=219ffwef9w0f; Domain=somecompany.co.uk; Path=/; Expires=Wed, 30 Aug 2019 00:00:00 GMT
</code></pre><h4 id="eu-cookie-directive">EU cookie directive</h4>
<p>La directiva de la UE significa que antes de que alguien pueda almacenar o recuperar cualquier informaci&#xF3;n de un ordenador, tel&#xE9;fono m&#xF3;vil u otro dispositivo, el usuario debe dar su consentimiento para hacerlo.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../express/express.html" class="navigation navigation-prev " aria-label="Previous page: Express">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../capituloQueryString/queryString.html" class="navigation navigation-next " aria-label="Next page: Query String">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Cookies","level":"1.11","depth":1,"next":{"title":"Query String","level":"1.12","depth":1,"path":"capituloQueryString/queryString.md","ref":"capituloQueryString/queryString.md","articles":[]},"previous":{"title":"Express","level":"1.10","depth":1,"path":"express/express.md","ref":"express/express.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"capitulocookies/cookies.md","mtime":"2017-03-26T15:48:38.579Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-26T18:44:36.549Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

